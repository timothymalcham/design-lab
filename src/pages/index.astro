---
import Layout from '../layouts/Layout.astro';

const modules = import.meta.glob('./design/**/*.{astro,md,mdx}', { eager: true });
const pagePaths = Object.keys(modules);

const toRoute = (filePath) => {
	const withoutPrefix = filePath.replace(/^\.\/design\//, '/design/');
	const withoutExt = withoutPrefix.replace(/\.(astro|md|mdx)$/, '');
	return withoutExt.replace(/\/index$/, '');
};

const designPages = pagePaths.map(toRoute).sort((a, b) => a.localeCompare(b));
---

<Layout>
	<main class="page">
		<h1>Design Pages</h1>
		{designPages.length ? (
			<ul>
				{designPages.map((href) => (
					<li><a href={href}>{href}</a></li>
				))}
			</ul>
		) : (
			<p class="empty">No design pages yet.</p>
		)}
	</main>
</Layout>

<style>
	.page {
		font-family: system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
		padding: 2rem;
	}

	.page h1 {
		margin: 0 0 1rem;
	}

	.page ul {
		list-style: none;
		padding: 0;
		margin: 0;
	}

	.page li + li {
		margin-top: 0.5rem;
	}

	.page a {
		color: inherit;
		text-decoration: underline;
	}

	.empty {
		color: #6b7280;
	}
</style>
